@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --background: 0 0% 100%;
    --foreground: 0 0% 0%;
    --card: 0 0% 100%;
    --card-foreground: 240 10% 3.9%;
    --popover: 0 0% 100%;
    --popover-foreground: 240 10% 3.9%;
    --primary: 240 5.9% 10%;
    --primary-foreground: 0 0% 98%;
    --secondary: 240 4.8% 95.9%;
    --secondary-foreground: 240 5.9% 10%;
    --muted: 240 4.8% 95.9%;
    --muted-foreground: 240 3.8% 46.1%;
    --accent: 240 4.8% 95.9%;
    --accent-foreground: 240 5.9% 10%;
    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 0 0% 98%;
    --border: 240 5.9% 90%;
    --input: 240 5.9% 90%;
    --ring: 240 10% 3.9%;
    --chart-1: 12 76% 61%;
    --chart-2: 173 58% 39%;
    --chart-3: 197 37% 24%;
    --chart-4: 43 74% 66%;
    --chart-5: 27 87% 67%;
    --radius: 0.5rem;
  }
  
  .dark {
    --background: 0 0% 0%;
    --foreground: 0 0% 100%;
    --card: 240 10% 3.9%;
    --card-foreground: 0 0% 98%;
    --popover: 240 10% 3.9%;
    --popover-foreground: 0 0% 98%;
    --primary: 0 0% 98%;
    --primary-foreground: 240 5.9% 10%;
    --secondary: 240 3.7% 15.9%;
    --secondary-foreground: 0 0% 98%;
    --muted: 240 3.7% 15.9%;
    --muted-foreground: 240 5% 64.9%;
    --accent: 240 3.7% 15.9%;
    --accent-foreground: 0 0% 98%;
    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 0 0% 98%;
    --border: 240 3.7% 15.9%;
    --input: 240 3.7% 15.9%;
    --ring: 240 4.9% 83.9%;
    --chart-1: 220 70% 50%;
    --chart-2: 160 60% 45%;
    --chart-3: 30 80% 55%;
    --chart-4: 280 65% 60%;
    --chart-5: 340 75% 55%;
  }
}

@layer base {
  * {
    border-color: hsl(var(--border));
  }
  
  body {
    /* Combined and fixed body styles */
    @apply bg-background text-foreground font-sans antialiased min-h-screen;
    font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif; /* Keep specific font stack */
    line-height: 1.5;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;

    /* If you want the Kotel image as a background for the *entire* page: */
    /*
    background-image: url('/Kotel.png');
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    */
    /* NOTE: The HTML has <img src="/Kotel.png" /> directly,
       so this background-image on body might not be needed
       or might cause an unwanted layering effect.
       If the HTML <img> is preferred, remove this.
    */
  }
  
  h1, h2, h3, h4, h5, h6 {
    font-weight: 600;
    line-height: 1.25;
  }
  
  p {
    margin-bottom: 1rem;
  }

  /*
    Original loading candle animation keyframes.
    It's good that these are in @layer base as they are foundational.
  */
  @keyframes flicker {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.02); }
  }
  
  @keyframes flame {
    0% { transform: translateX(-50%) scale(1) rotate(-1deg); }
    100% { transform: translateX(-50%) scale(1.1) rotate(1deg); }
  }

  @keyframes spin {
    to { transform: rotate(360deg); }
  }

  /* Styles for the interactive candle (now in style.css) */
  .candle-wrapper {
      position: relative; /* Needed for absolute positioning of the overlay */
      display: flex; /* Use flexbox to center the candle */
      justify-content: center;
      align-items: center;
      margin-top: 20px; /* Add some space from the Kotel image */
      margin-bottom: 20px; /* Add some space before the loading container */
  }

  #candle {
      display: block; /* Ensures no extra space below the image */
      max-width: 300px; /* Adjust as needed, e.g., 300px */
      width: 80%; /* Make it responsive */
      height: auto;
      cursor: pointer; /* Indicates it's clickable */
      transition: transform 0.1s ease-in-out; /* Smooth transition for click feedback */
  }

  #candle:active {
    transform: scale(0.98); /* Slight scale down on click */
  }

  /* CSS for flickering animation */
  @keyframes advancedFlicker {
      0% {
          transform: scale(1);
          filter: brightness(1);
          opacity: 1;
      }
      20% {
          transform: scale(0.99);
          filter: brightness(1.1);
          opacity: 0.98;
      }
      40% {
          transform: scale(1.01);
          filter: brightness(0.95);
          opacity: 1.02;
      }
      60% {
          transform: scale(0.995);
          filter: brightness(1.05);
          opacity: 0.99;
      }
      80% {
          transform: scale(1.005);
          filter: brightness(0.98);
          opacity: 1.01;
      }
      100% {
          transform: scale(1);
          filter: brightness(1);
          opacity: 1;
      }
  }

  /* Apply this class when the candle is lit */
  #candle.flickering {
      animation: advancedFlicker 0.2s infinite alternate; /* Adjust duration for flicker speed */
  }

  /* Style for the name overlay */
  .candle-name-overlay {
      position: absolute;
      /* Adjust these values to position the text precisely on your candle image */
      /* You'll need to experiment with these percentages based on your image */
      top: 50%; /* Vertical position (e.g., 40% for higher, 60% for lower) */
      left: 50%; /* Horizontal position */
      transform: translate(-50%, -50%); /* Centers the element precisely */
      
      font-size: 1.2rem; /* Adjust font size to fit the label area */
      font-weight: bold;
      color: #333; /* Dark color for visibility against the candle's background */
      text-align: center;
      white-space: nowrap; /* Prevent text from wrapping */
      z-index: 10; /* Ensures the text is on top of the image */

      /* Optional: Add a subtle text shadow for better readability */
      text-shadow: 1px 1px 2px rgba(255, 255, 255, 0.7); 
  }
}

@layer components {
  .btn {
    @apply inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors;
    @apply focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring;
    @apply disabled:pointer-events-none disabled:opacity-50;
  }

  /* You might have other custom components here */
}

@layer utilities {
  .text-balance {
    text-wrap: balance;
  }
  
  .focus-visible\:ring-1:focus-visible {
    outline: 2px solid transparent;
    outline-offset: 2px;
    box-shadow: 0 0 0 1px hsl(var(--ring));
  }

  /* You might have other custom utilities here */
}

/* Global Music Player - Fixed Positioning */
.music-player-fixed {
  position: fixed !important;
  bottom: 1.5rem !important;
  right: 1.5rem !important;
  z-index: 9999 !important;
  pointer-events: auto !important;
}

/* Ensure the music player doesn't interfere with page scrolling */
.music-player-fixed * {
  pointer-events: auto !important;
}

/* Add some padding to prevent content from going under the music button */
.main-content {
  padding-bottom: 6rem;
}

/* Ensure tooltips appear above everything */
.music-tooltip {
  z-index: 10000 !important;
}

/*
  Removed conflicting body styles from the very end.
  They were already handled within @layer base.
*/